# keytyper-backend

## Описание

В этом репозитории содержится сервер проекта [keytyper](https://codeberg.org/katsuki/keytyper). 

Сервер написан на NodeJS и использует [prisma](https://www.prisma.io/) для подключения базы данных и [socket.io](https://socket.io/) для поддержания постоянного асинхронного подключения пользователей в комнатах через websocket.

Аутентификация пользователей реализована в виде JWT (JsonWebToken).

## Установка

### Клонирование репозитория

Для установки данного сервера на своей локальной сети необходимо клонировать репозиторий и заполнить переменные файла `.env.public` (предарительно переименовав его в `.env`).

```
git clone https://codederg.org/katsuki/keytyper-backend.git
```

### Первый запуск

Перед первым запуском сервера необходимо создать отведенную базу данных. По умолчанию сервер использует mariadb (MySQL), поэтому, в случае если вы собираетесь использовать иную СУБД, необходимо указать ее в строке `provider` в файле `prisma/schema.prisma`

```prisma
datasource db {
  provider		= "mysql"
  url			= env("DATABASE_URL")
}
```

После этого следует скачать все необходимые библиотеки

```sh 
$ yarn install # если вы используете yarn
####
$ npm install # если вы используете npm
####
$ bun install # если вы используете bun
```

Последним шагом перед первым запуском сервера является конфигурация prisma.

```sh 
$ yarn prisma db push
####
$ npx prisma db push
```

### Запуск сервера

После всех приготовлений можно будет запускать сервер при помощи скрипта `start`

```sh
$ yarn start
####
$ npx start
```
